/runtest_ean13 {
20 dict begin
% Barcode Writer in Pure PostScript
% https://bwipp.terryburton.co.uk
%
% Copyright (c) 2004-2024 Terry Burton

%%/ean13 dup /uk.co.terryburton.bwipp findresource cvx def

/eq_tmpl {
    /e exch def
    /t exch def
    { t (dontdraw) ean13 /sbs get } e isEqual
} def

/er_tmpl {
    /e exch def
    /t exch def
    { t (dontdraw) ean13 /sbs get } e isError
} def


(2112345678900)       [1 1 1 2 2 2 1 2 2 2 1 2 2 1 2 1 1 4 1 1 1 3 2 1 3 2 1 1 1 1 1 1 1 1 1 4 1 3 1 2 1 2 1 3 3 1 1 2 3 2 1 1 3 2 1 1 1 1 1] eq_tmpl  % 13 digits
(211234567890)        [1 1 1 2 2 2 1 2 2 2 1 2 2 1 2 1 1 4 1 1 1 3 2 1 3 2 1 1 1 1 1 1 1 1 1 4 1 3 1 2 1 2 1 3 3 1 1 2 3 2 1 1 3 2 1 1 1 1 1] eq_tmpl  % Omit checksum
(2112345678901)       /bwipp.ean13badCheckDigit                                                                                               er_tmpl  % Invalid checksum

(2112345678900 12345) [1 1 1 2 2 2 1 2 2 2 1 2 2 1 2 1 1 4 1 1 1 3 2 1 3 2 1 1 1 1 1 1 1 1 1 4 1 3 1 2 1 2 1 3 3 1 1 2 3 2 1 1 3 2 1 1 1 1 1           % Add 5
                       12.0
                       1 1 2 1 2 2 2 1 1 2 1 2 2 1 1 1 1 4 1 1 1 1 1 3 2 1 1 1 2 3 1]                                                         eq_tmpl

(2112345678900 12)    [1 1 1 2 2 2 1 2 2 2 1 2 2 1 2 1 1 4 1 1 1 3 2 1 3 2 1 1 1 1 1 1 1 1 1 4 1 3 1 2 1 2 1 3 3 1 1 2 3 2 1 1 3 2 1 1 1 1 1           % Add 2
                       12.0
                       1 1 2 2 2 2 1 1 1 2 1 2 2]                                                                                             eq_tmpl

(2112345678900 123)   /bwipp.ean13badAddOnLength                                                                                              er_tmpl  % Add 3!

(A112345678900)       /bwipp.ean13badCharacter                                                                                                er_tmpl  % Bad character

(21123456789)         /bwipp.ean13badLength                                                                                                   er_tmpl  % Too short
(21123456789012)      /bwipp.ean13badLength                                                                                                   er_tmpl  % Too long

% Rotate to test mirror maps
(0123456789012)       [1 1 1 2 2 2 1 2 1 2 2 1 4 1 1 1 1 3 2 1 2 3 1 1 1 1 4 1 1 1 1 1 1 3 1 2 1 2 1 3 3 1 1 2 3 2 1 1 2 2 2 1 2 1 2 2 1 1 1] eq_tmpl
(1234567890128)       [1 1 1 2 1 2 2 1 4 1 1 2 3 1 1 1 2 3 1 4 1 1 1 2 1 3 1 1 1 1 1 1 1 2 1 3 3 1 1 2 3 2 1 1 2 2 2 1 2 1 2 2 1 2 1 3 1 1 1] eq_tmpl
(2345678901234)       [1 1 1 1 4 1 1 1 1 3 2 1 3 2 1 4 1 1 1 1 3 1 2 3 1 2 1 1 1 1 1 1 3 1 1 2 3 2 1 1 2 2 2 1 2 1 2 2 1 4 1 1 1 1 3 2 1 1 1] eq_tmpl
(3456789012340)       [1 1 1 1 1 3 2 1 2 3 1 4 1 1 1 2 1 3 1 3 1 2 1 3 1 1 2 1 1 1 1 1 3 2 1 1 2 2 2 1 2 1 2 2 1 4 1 1 1 1 3 2 3 2 1 1 1 1 1] eq_tmpl
(4567890123456)       [1 1 1 1 2 3 1 4 1 1 1 1 3 1 2 1 2 1 3 2 1 1 3 1 1 2 3 1 1 1 1 1 2 2 2 1 2 1 2 2 1 4 1 1 1 1 3 2 1 2 3 1 1 1 1 4 1 1 1] eq_tmpl
(5678901234562)       [1 1 1 1 1 1 4 2 1 3 1 3 1 2 1 3 1 1 2 3 2 1 1 1 2 2 2 1 1 1 1 1 2 1 2 2 1 4 1 1 1 1 3 2 1 2 3 1 1 1 1 4 2 1 2 2 1 1 1] eq_tmpl
(6789012345678)       [1 1 1 1 3 1 2 3 1 2 1 2 1 1 3 1 1 2 3 2 2 2 1 2 1 2 2 1 1 1 1 1 1 4 1 1 1 1 3 2 1 2 3 1 1 1 1 4 1 3 1 2 1 2 1 3 1 1 1] eq_tmpl
(7890123456784)       [1 1 1 1 2 1 3 2 1 1 3 3 2 1 1 1 2 2 2 2 1 2 2 1 1 4 1 1 1 1 1 1 1 1 3 2 1 2 3 1 1 1 1 4 1 3 1 2 1 2 1 3 1 1 3 2 1 1 1] eq_tmpl
(8901234567890)       [1 1 1 3 1 1 2 1 1 2 3 2 2 2 1 2 2 1 2 1 1 4 1 1 1 3 2 1 1 1 1 1 1 2 3 1 1 1 1 4 1 3 1 2 1 2 1 3 3 1 1 2 3 2 1 1 1 1 1] eq_tmpl
(9012345678906)       [1 1 1 3 2 1 1 1 2 2 2 2 2 1 2 1 4 1 1 2 3 1 1 1 2 3 1 1 1 1 1 1 1 1 1 4 1 3 1 2 1 2 1 3 3 1 1 2 3 2 1 1 1 1 1 4 1 1 1] eq_tmpl
end
} bind def
