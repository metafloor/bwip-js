/runtest_datamatrix {
20 dict begin
% Barcode Writer in Pure PostScript
% https://bwipp.terryburton.co.uk
%
% Copyright (c) 2004-2024 Terry Burton

% vim: set ts=4 sw=4 et :

%%/datamatrix dup /uk.co.terryburton.bwipp findresource cvx def


% Macro 05

{
    ([\)>^03005^029214^030^004) (debugcws parse) datamatrix  % Short 05
} [236 151 53] debugIsEqual

{
    ([\)>^03005^02921456^030^004) (debugcws parse) datamatrix  % 05 with 6 in processed position 5
} [236 151 175 55 129] debugIsEqual


% Metrics loops

{
    (^ECI000003price:$439.97^ECI000029^193^227^202^219^188^219:^163^1643149.79^ECI000017Preis:444,90 ^164)
    (dontdraw parse parsefnc format=rectangle) datamatrix /pixs get  % Non-DMRE
}
[
    1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0
    1 0 0 0 0 1 1 1 0 1 1 0 0 1 0 1 1 1 0 0 1 1 1 1 1 0 1 0 0 1 0 0 1 0 0 0 1 1 0 1 0 1 1 0 1 1 1 1
    1 0 0 0 0 1 0 1 1 1 0 0 1 1 1 1 0 1 0 0 1 1 1 0 1 1 1 1 0 1 1 1 0 0 1 1 0 0 1 1 0 1 0 1 1 1 0 0
    1 1 0 0 1 0 1 0 0 0 1 1 1 0 0 1 1 0 0 1 0 1 0 1 1 0 0 1 0 1 1 0 1 0 1 0 0 0 1 1 0 1 1 1 0 1 1 1
    1 0 0 1 0 1 0 1 0 1 1 1 1 1 1 0 1 0 1 1 0 0 1 0 1 1 1 0 0 0 0 1 1 0 0 0 0 1 1 0 0 0 0 0 1 1 1 0
    1 1 1 0 0 0 0 1 1 1 1 1 1 0 0 1 1 0 1 1 0 1 0 1 1 1 0 1 1 0 0 1 0 0 0 1 0 0 0 0 0 0 0 0 1 0 0 1
    1 1 1 0 0 1 1 1 0 1 0 0 0 1 1 1 0 0 0 0 1 1 0 0 1 1 1 0 1 0 1 0 0 0 0 0 0 0 1 1 0 0 1 0 1 1 0 0
    1 0 0 1 0 0 1 0 0 0 0 0 1 1 1 1 0 1 0 0 0 1 1 1 1 0 0 0 0 0 1 1 1 1 1 1 0 0 0 1 0 1 1 1 0 1 1 1
    1 1 0 1 0 1 1 1 1 1 0 0 0 0 0 1 0 1 0 1 1 1 0 0 1 0 0 0 1 0 0 1 1 1 0 1 0 1 0 1 0 1 0 0 1 1 1 0
    1 0 0 1 0 1 1 1 1 0 1 0 0 1 0 1 0 0 1 0 1 1 1 1 1 1 0 0 1 1 0 1 0 0 1 1 0 1 1 0 1 0 1 0 0 0 0 1
    1 1 0 0 0 1 1 1 0 0 0 1 0 1 0 0 1 1 1 0 1 1 0 0 1 0 0 0 0 0 1 0 0 0 0 1 0 1 0 1 1 1 0 0 0 0 0 0
    1 1 0 1 1 1 1 1 0 1 0 0 1 1 0 0 1 1 0 0 0 0 0 1 1 1 0 0 0 0 0 0 0 1 0 0 0 1 0 0 1 1 1 0 0 0 1 1
    1 0 0 0 0 1 0 0 1 0 0 1 0 1 1 1 0 1 0 1 1 1 0 0 1 1 0 1 0 1 0 1 0 1 0 1 1 0 0 0 0 0 1 0 0 0 1 0
    1 0 1 0 0 0 1 1 1 1 1 0 0 1 1 0 1 0 0 1 1 1 0 1 1 1 1 1 1 0 1 1 1 0 0 0 0 0 1 1 1 0 0 1 1 0 1 1
    1 1 0 0 1 1 1 0 0 1 1 1 0 1 1 0 0 0 1 0 1 1 1 0 1 0 0 0 1 1 1 0 1 1 0 0 0 0 0 1 1 0 0 1 0 0 1 0
    1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
] debugIsEqual

{
    (^ECI000003price:$439.97^ECI000029^193^227^202^219^188^219:^163^1643149.79^ECI000017Preis:444,90 ^164)
    (dontdraw parse parsefnc format=rectangle dmre) datamatrix /pixs get  % DMRE
}
[
    1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0
    1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 0 0 0 1 1 1
    0 0 0 1 0 1 1 0 1 1 1 1 1 1 1 0 1 0 0 0 1 0 0 1 0 1 0 1 1 0 0 1 1 1 1 1 0 0 0 0 0 1 1 1 0 0 0 1 1 0 1 1 1 1 0 1 1 1 0 1 0 0 0 0
    1 1 0 0 1 0 0 1 1 0 1 0 1 0 1 1 1 1 1 0 1 1 0 1 0 0 1 1 1 1 0 1 0 1 1 1 0 0 0 1 0 1 0 0 0 1 0 1 1 0 0 0 0 1 0 1 1 1 1 1 0 0 1 0
    1 1 1 0 1 0 1 1 1 1 1 1 1 1 0 1 1 1 1 0 1 0 0 0 1 0 0 1 1 0 1 0 0 1 0 1 1 1 1 1 0 0 1 0 1 0 1 1 0 1 0 0 0 0 1 1 1 1 0 0 1 0 0 0
    1 1 1 1 1 1 0 1 0 0 0 1 1 0 1 0 1 1 0 0 1 1 1 0 1 1 0 0 0 0 0 1 0 1 1 1 0 0 0 0 1 1 0 0 1 0 1 0 1 0 1 1 1 1 1 1 1 0 0 1 1 1 1 1
    1 1 1 0 1 0 0 0 1 0 0 1 1 0 1 1 1 0 1 1 1 0 1 0 1 0 0 0 1 0 1 1 1 0 1 1 1 0 0 0 1 1 1 1 0 0 1 0 0 1 0 1 0 1 1 1 1 1 0 1 0 1 1 0
    1 1 1 1 0 0 0 1 1 0 0 1 1 0 1 1 1 1 1 1 0 1 0 1 0 0 0 1 1 0 0 1 1 1 0 1 0 1 0 1 0 0 0 0 0 1 0 1 0 0 0 0 1 1 0 0 0 1 1 1 0 1 1 0
    0 1 1 1 1 1 1 0 1 1 1 1 1 0 0 1 1 1 0 1 1 0 1 1 1 0 1 0 1 1 0 0 1 1 0 0 0 0 1 1 0 1 1 1 1 0 0 0 1 0 0 1 1 1 1 0 1 1 0 1 0 0 0 1
    0 0 0 0 1 1 0 0 1 0 0 0 1 0 0 0 0 1 0 1 1 1 1 0 1 1 1 0 0 0 1 1 1 0 1 0 1 0 0 0 1 1 0 1 1 0 0 0 0 1 1 0 0 0 0 0 0 1 1 1 0 1 0 1
    1 1 0 0 0 1 1 0 1 0 1 1 0 0 0 1 1 1 0 1 1 0 0 1 0 0 0 0 0 1 0 1 1 0 1 0 1 1 1 1 1 1 0 1 0 1 0 1 0 0 0 0 1 0 0 1 0 1 0 1 1 1 1 1
    1 1 0 0 0 1 1 1 1 1 0 1 1 0 1 1 1 1 1 0 0 1 1 0 0 1 1 1 1 1 0 0 1 0 1 0 1 1 0 0 1 1 1 1 0 0 1 1 0 0 1 0 0 0 1 0 1 1 0 0 1 0 0 1
    0 0 1 0 0 1 1 0 0 1 0 0 1 1 0 0 1 1 0 1 0 0 1 0 0 0 1 1 1 0 0 0 1 0 0 1 1 1 0 0 1 1 1 0 0 0 0 1 0 1 1 0 1 0 0 0 1 0 0 0 0 0 1 0
    0 1 0 1 1 0 1 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
    1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
] debugIsEqual


% Figures

{
    (A1B2C3D4E5F6G7H8I9J0K1L2) (debugcws) datamatrix  % ISO/IEC 16022:2006 Figure 1, same
} [230 88 88 40 8 107 147 59 67 126 206 78 126 144 121 35 47 254] debugIsEqual

{
    (123456) (debugcws) datamatrix  % ISO/IEC 16022:2006 Figure O.2, same
} [142 164 186] debugIsEqual

{
    (30Q324343430794<OQQ) (debugcws) datamatrix  % ISO/IEC 16022:2006 Figure R.1, same
} [160 82 162 173 173 173 137 224 61 80 82 82] debugIsEqual

{
    (A1B2C3D4E5F6G7H8I9J0K1L2) (debugcws columns=64 dmre format=rectangle) datamatrix  % ISO/IEC 21471:2020 Figure 1, same
} [230 88 88 40 8 107 147 59 67 126 206 78 126 144 121 35 47 254 129 73 223 118 14 164] debugIsEqual

{
    (123456789012345678901234567890123456) (debugcws columns=48 dmre format=rectangle) datamatrix  % ISO/IEC 21471:2020 Figure H.3, same
} [142 164 186 208 220 142 164 186 208 220 142 164 186 208 220 142 164 186] debugIsEqual

{
    (30Q324343430794<OQ) (debugcws rows=16 format=rectangle) datamatrix  % ISO/IEC 21471:2020 Figure J.1 (NOTE: single Q at end, not 2 as in caption; also not DMRE), same
} [160 82 162 173 173 173 137 224 61 80 82 129 42 192 87 237 133 28 178 73 223 118 14 164 59 209 104 254 150 45 195 90] debugIsEqual

{
    ([\)>^03006^029+/ACMRN123456/V2009121908334^030^004) (debugcws parse) datamatrix  % ANSI/HIBC 1.3-2010 Section 2.2 Patient Identification Example (p.28), Macro 06, same
} [237 44 48 66 68 78 83 79 142 164 186 48 87 150 139 142 149 138 163 53 129 118] debugIsEqual
end
} bind def
